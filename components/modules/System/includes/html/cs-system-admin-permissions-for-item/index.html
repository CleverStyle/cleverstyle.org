<polymer-element name="cs-system-admin-permissions-for-item">
  <template>
    <template id="control-buttons">
      <button class="uk-button" on-click="[[invert]]" type="button">[[L.invert]]</button>
      <button class="uk-button" on-click="[[allow_all]]" type="button">[[L.allow_all]]</button>
      <button class="uk-button" on-click="[[deny_all]]" type="button">[[L.deny_all]]</button>
    </template>
    <!-- for groups -->
    <template id="inner-radio-groups">
      <span class="uk-button-group" data-uk-button-radio>
        <!-- inherited -->
        <template if="[[permissions.groups[group.id] == -1 || permissions.groups[group.id] == undefined]]">
          <label class="uk-button uk-active">
            <input checked name="groups[{{group.id}}]" type="radio" value="-1">
            [[L.inherited]]
          </label>
        </template>
        <template if="[[permissions.groups[group.id] != -1 && permissions.groups[group.id] != undefined]]">
          <label class="uk-button">
            <input name="groups[{{group.id}}]" type="radio" value="-1">
            [[L.inherited]]
          </label>
        </template>
        <!-- deny -->
        <template if="[[permissions.groups[group.id] == 0]]">
          <label class="uk-button uk-active">
            <input checked name="groups[{{group.id}}]" type="radio" value="0">
            [[L.deny]]
          </label>
        </template>
        <template if="[[permissions.groups[group.id] != 0]]">
          <label class="uk-button">
            <input name="groups[{{group.id}}]" type="radio" value="0">
            [[L.deny]]
          </label>
        </template>
        <!-- allow -->
        <template if="[[permissions.groups[group.id] == 1]]">
          <label class="uk-button uk-active">
            <input checked name="groups[{{group.id}}]" type="radio" value="1">
            [[L.allow]]
          </label>
        </template>
        <template if="[[permissions.groups[group.id] != 1]]">
          <label class="uk-button">
            <input name="groups[{{group.id}}]" type="radio" value="1">
            [[L.allow]]
          </label>
        </template>
      </span>
    </template>
    <!-- the same, but for user -->
    <template id="inner-radio-users">
      <span class="uk-button-group" data-uk-button-radio>
        <!-- inherited -->
        <template if="[[permissions.users[user.id] == -1 || permissions.users[user.id] == undefined]]">
          <label class="uk-button uk-active">
            <input checked name="users[{{user.id}}]" type="radio" value="-1">
            [[L.inherited]]
          </label>
        </template>
        <template if="[[permissions.users[user.id] != -1 && permissions.users[user.id] != undefined]]">
          <label class="uk-button">
            <input name="users[{{user.id}}]" type="radio" value="-1">
            [[L.inherited]]
          </label>
        </template>
        <!-- deny -->
        <template if="[[permissions.users[user.id] == 0]]">
          <label class="uk-button uk-active">
            <input checked name="users[{{user.id}}]" type="radio" value="0">
            [[L.deny]]
          </label>
        </template>
        <template if="[[permissions.users[user.id] != 0]]">
          <label class="uk-button">
            <input name="users[{{user.id}}]" type="radio" value="0">
            [[L.deny]]
          </label>
        </template>
        <!-- allow -->
        <template if="[[permissions.users[user.id] == 1]]">
          <label class="uk-button uk-active">
            <input checked name="users[{{user.id}}]" type="radio" value="1">
            [[L.allow]]
          </label>
        </template>
        <template if="[[permissions.users[user.id] != 1]]">
          <label class="uk-button">
            <input name="users[{{user.id}}]" type="radio" value="1">
            [[L.allow]]
          </label>
        </template>
      </span>
    </template>
    <template id="users-list">
      <cs-table-row>
        <cs-table-cell data-uk-tooltip="[[tooltip_animation]]" title="[[user.email]]">[[user.username || user.login]]</cs-table-cell>
        <cs-table-cell>
          <template bind ref="inner-radio-users"></template>
        </cs-table-cell>
      </cs-table-row>
    </template>
    <ul class="cs-tabs">
      <li>[[L.groups]]</li>
      <li>[[L.users]]</li>
    </ul>
    <form class="uk-form" id="form">
      <div>
        <p class="cs-left">
          <template bind ref="control-buttons"></template>
        </p>
        <cs-table right-left>
          <template repeat="{{group in groups}}">
            <cs-table-row>
              <cs-table-cell data-uk-tooltip="[[tooltip_animation]]" title="[[group.description]]">[[group.title]]</cs-table-cell>
              <cs-table-cell>
                <template bind ref="inner-radio-groups"></template>
              </cs-table-cell>
            </cs-table-row>
          </template>
        </cs-table>
      </div>
      <div>
        <p class="cs-left">
          <template bind ref="control-buttons"></template>
        </p>
        <cs-table id="users" right-left>
          <template ref="users-list" repeat="{{user in users}}"></template>
        </cs-table>
        <input autocomplete="off" id="search" placeholder="[[L.type_username_or_email_press_enter]]]" type="search">
        <cs-table id="search-results" right-left>
          <template ref="users-list" repeat="{{user in found_users}}"></template>
        </cs-table>
      </div>
    </form>
    <button class="uk-button" on-click="[[save]]" type="button">[[L.save]]</button>
  </template>
  <script src="script.js"></script>
</polymer-element>
