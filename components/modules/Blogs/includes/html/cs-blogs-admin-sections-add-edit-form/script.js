// Generated by LiveScript 1.4.0
/**
 * @package   Blogs
 * @category  modules
 * @author    Nazar Mokrynskyi <nazar@mokrynskyi.com>
 * @copyright Copyright (c) 2016, Nazar Mokrynskyi
 * @license   MIT License, see license.txt
 */
(function(){
  Polymer({
    is: 'cs-blogs-admin-sections-add-edit-form',
    behaviors: [cs.Polymer.behaviors.Language('blogs_')],
    properties: {
      section: Object,
      original_title: String,
      sections: Array
    },
    ready: function(){
      var this$ = this;
      Promise.all([
        this.id
          ? $.getJSON('api/Blogs/admin/sections/' + this.id)
          : {
            title: '',
            path: '',
            parent: 0
          }, $.getJSON('api/Blogs/admin/sections')
      ]).then(function(arg$){
        var sections;
        this$.section = arg$[0], sections = arg$[1];
        this$.original_title = this$.section.title;
        this$.sections = sections;
      });
    },
    _save: function(){
      var this$ = this;
      $.ajax({
        url: 'api/Blogs/admin/sections' + (this.id ? '/' + this.id : ''),
        data: this.section,
        type: this.id ? 'put' : 'post',
        success: function(result){
          cs.ui.notify(this$.L.changes_saved, 'success', 5);
        }
      });
    }
  });
}).call(this);
