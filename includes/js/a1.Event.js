// Generated by CoffeeScript 1.4.0

/**
 * @package   CleverStyle CMS
 * @author    Nazar Mokrynskyi <nazar@mokrynskyi.com>
 * @copyright Copyright (c) 2015, Nazar Mokrynskyi
 * @license   MIT License, see license.txt
*/


/*
 # Load configuration from special template elements
*/


(function() {
  var callbacks, e;

  callbacks = {};

  e = {
    'on': function(action, callback) {
      if (!action || !callback) {
        return e;
      }
      if (!callbacks[action]) {
        callbacks[action] = [];
      }
      callbacks[action].push(callback);
      return e;
    },
    'off': function(action, callback) {
      if (!callbacks[action]) {
        return e;
      }
      if (!callback) {
        delete callbacks[action];
        return e;
      }
      callbacks[action] = callbacks[action].filter(function(c) {
        return c !== callback;
      });
      return e;
    },
    once: function(action, callback) {
      var callback_;
      if (!action || !callback) {
        return e;
      }
      callback_ = function() {
        e.off(action, callback_);
        return callback.apply(callback, arguments);
      };
      return e.on(action, callback_);
    },
    fire: function(action, param1, _) {
      var args, callback, index, _i, _len, _ref;
      if (!action || !callbacks[action]) {
        return true;
      }
      args = Array.prototype.slice.call(arguments, 1);
      _ref = callbacks[action];
      for (index = _i = 0, _len = _ref.length; _i < _len; index = ++_i) {
        callback = _ref[index];
        if (callback.apply(callback, args) === false) {
          return false;
        }
      }
      return true;
    }
  };

  cs.Event = e;

}).call(this);
