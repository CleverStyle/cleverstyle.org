// Generated by LiveScript 1.4.0
/**
 * @package   Static Pages
 * @category  modules
 * @author    Nazar Mokrynskyi <nazar@mokrynskyi.com>
 * @copyright Copyright (c) 2015-2016, Nazar Mokrynskyi
 * @license   MIT License, see license.txt
 */
(function(){
  var html_to_node, title, content, form;
  html_to_node = function(html){
    var div;
    div = document.createElement('div');
    div.innerHTML = html;
    return div.firstChild;
  };
  title = document.querySelector('.cs-static-pages-page-title');
  if (title) {
    window.onbeforeunload = function(){
      return true;
    };
  }
  content = document.querySelector('.cs-static-pages-page-content');
  form = document.querySelector('.cs-static-pages-page-form');
  if (!form) {
    return;
  }
  while (!form.matches('form')) {
    form = form.parentElement;
  }
  form.addEventListener('submit', function(){
    var title_input, content_textarea;
    window.onbeforeunload = null;
    title_input = html_to_node('<input name="title" hidden>');
    title_input.value = title.textContent;
    this.appendChild(title_input);
    if (!content.matches('textarea')) {
      content_textarea = html_to_node('<textarea name="content" hidden></textarea>');
      content_textarea.value = content.innerHTML;
      this.append(content_textarea);
    }
  });
}).call(this);
